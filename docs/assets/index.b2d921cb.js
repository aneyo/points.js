import{l as v,d as Q,a as I,o as P,b as Y,r as B,c as p,e as _,f as y,g as i,w as E,h as r,t as R,i as A,p as M,j,k as Z,m as g,n as $,u as o,q as N,F as T,s as u4,v as e4,x as t4,y as o4,z as n4}from"./vendor.1dcde9b0.js";const s4=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const h of n.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&c(h)}).observe(document,{childList:!0,subtree:!0});function u(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(t){if(t.ep)return;t.ep=!0;const n=u(t);fetch(t.href,n)}};s4();v.config({driver:v.INDEXEDDB,storeName:"points.js",name:"points.js"});const z={list:"https://gist.githubusercontent.com/aneyo/4566b18ed624ac7c2b28daaedc28c7dd/raw/points.txt",reward:{random:"",choose:"",useBoth:!1},random:!0,volume:.8,show:{inlineSound:!1,sounds:!0,rewards:!1}},a4=Q("main",{state(){return{token:null,config:null,channel:null}},actions:{async fetchUser(a){const l=a||this.token,u=await fetch("https://api.twitch.tv/helix/users",{headers:{"Client-Id":"loh6hmf1odxlkqbgmv7b22lw4bl5rm",Authorization:"Bearer "+l}});if(!u.ok)throw 0;const{data:c}=await u.json();if(c.length<1)throw 1;this.channel=c[0]},async load(){const a=await v.getItem("token"),l=await v.getItem("config");this.token=a,this.config=l||z},async save(){await v.setItem("token",this.token),await v.setItem("config",JSON.parse(JSON.stringify(this.config)))},async reset(a=!0){this.token=null,a&&(this.config=z),await v.setItem("token",this.token),a&&await v.setItem("config",JSON.parse(JSON.stringify(this.config)))}}}),U=a4;var L=(a,l)=>{const u=a.__vccOpts||a;for(const[c,t]of l)u[c]=t;return u};const F=a=>(M("data-v-0d752739"),a=a(),j(),a),l4={class:"welcom"},i4=F(()=>r("h1",null,"\u0414\u043E\u0431\u0440\u043E \u041F\u043E\u0436\u0430\u043B\u043E\u0432\u0430\u0442\u044C!",-1)),r4=F(()=>r("span",null,"\u0412\u043E\u0439\u0442\u0438 \u0447\u0435\u0440\u0435\u0437 ",-1)),c4=F(()=>r("span",null,"\xA0",-1)),d4=F(()=>r("b",null,"Twitch",-1)),m4={key:0,class:"error"},p4=F(()=>r("b",null,"\u041E\u0448\u0438\u0431\u043A\u0430:",-1)),f4=I({setup(a){const u="https://id.twitch.tv/oauth2/authorize?response_type=token&redirect_uri=https://aneyo.github.io/points.js/callback&scope=channel:read:redemptions&client_id=loh6hmf1odxlkqbgmv7b22lw4bl5rm&force_verify=true";P(()=>{window.addEventListener("message",d)}),Y(()=>{window.removeEventListener("message",d)});const c=U(),t=B(!1),n=B("");function h(){if(t.value)return;n.value="",t.value=!0;const m=window.open(u,"\u0412\u043E\u0439\u0442\u0438 \u0441 \u043F\u043E\u043C\u043E\u0449\u044C\u044E Twitch","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, copyhistory=no, height=700, width=700");m&&m.focus()}function d(m){const[D,f]=m.data;m.origin===window.origin&&(m.source.close(),D?w(f):(n.value=f||"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430!",t.value=!1))}async function w(m){try{await c.fetchUser(m),c.token=m,await c.save()}catch{n.value="\u0422\u043E\u043A\u0435\u043D \u043D\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0439"}t.value=!1}return(m,D)=>{const f=p("it-button");return _(),y("div",l4,[i4,i(f,{type:"primary",icon:"login",class:"login-button",loading:t.value,onClick:h},{default:E(()=>[r4,c4,d4]),_:1},8,["loading"]),n.value?(_(),y("div",m4,[p4,r("span",null,"\xA0"+R(n.value),1)])):A("",!0)])}}});var g4=L(f4,[["__scopeId","data-v-0d752739"]]);const x=a=>(M("data-v-7414429e"),a=a(),j(),a),_4={class:"editor"},v4={class:"user"},h4={class:"message"},E4={class:"it-input-label volume-label"},w4=x(()=>r("span",null,"\u0413\u0440\u043E\u043C\u043A\u043E\u0441\u0442\u044C \u0437\u0432\u0443\u043A\u043E\u0432",-1)),D4={key:0,class:"action"},B4={class:"container"},y4=x(()=>r("span",null,"\u0413\u0435\u043D\u0435\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0441\u044B\u043B\u043A\u0443",-1)),A4=x(()=>r("img",{src:"https://c.tenor.com/krxN3ycuDygAAAAC/happy-anime.gif"},null,-1)),b4={class:"modal"},C4={class:"modal-buttons"},k4=x(()=>r("span",null,"\u041A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0441\u044B\u043B\u043A\u0443",-1)),F4=u4("\u0417\u0430\u043A\u0440\u044B\u0442\u044C"),V4=I({setup(a){const l=Z("$message"),u=U(),c=g(()=>u.channel.display_name||u.channel.login),t=B(u.token+""),n=B(u.config.volume*100);$(()=>n.value,()=>{u.config.volume=n.value/100}),$(()=>t.value,()=>{d.token.value&&(u.token=t.value)}),$(()=>u.config,async()=>{await u.save()},{deep:!0});const h=g(()=>{switch(!0){case n.value>=80:return"volume_up";case n.value>=40:return"volume_down";case n.value>0:return"volume_mute";default:return"volume_off"}}),d={token:g(()=>t.value!==""),list:g(()=>u.config.list!==""),rewardRandom:g(()=>u.config.reward.random.trim()!==""&&u.config.reward.choose.trim()!==u.config.reward.random.trim()),rewardSelect:g(()=>!u.config.reward.useBoth||u.config.reward.choose.trim()!==""&&u.config.reward.choose.trim()!==u.config.reward.random.trim())},w={rewardRandom:g(()=>{switch(!0){case u.config.reward.random.trim()==="":return"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043D\u0430\u0433\u0440\u0430\u0434\u044B \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C!";case(u.config.reward.useBoth&&u.config.reward.choose.trim()===u.config.reward.random.trim()):return"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u044D\u0442\u043E\u0439 \u043D\u0430\u0433\u0440\u0430\u0434\u044B \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0441\u043E\u0432\u043F\u043E\u0434\u0430\u0442\u044C \u0441 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435\u043C \u0434\u0440\u0443\u0433\u043E\u0439!";default:return null}}),rewardSelect:g(()=>{if(!u.config.reward.useBoth)return null;switch(!0){case u.config.reward.choose.trim()==="":return"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043D\u0430\u0433\u0440\u0430\u0434\u044B \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C!";case u.config.reward.choose.trim()===u.config.reward.random.trim():return"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u044D\u0442\u043E\u0439 \u043D\u0430\u0433\u0440\u0430\u0434\u044B \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0441\u043E\u0432\u043F\u043E\u0434\u0430\u0442\u044C \u0441 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435\u043C \u0434\u0440\u0443\u0433\u043E\u0439!";default:return null}})},m=g(()=>d.list.value&&d.rewardRandom.value&&d.rewardSelect.value&&d.token.value),D=g(()=>{const b="https://aneyo.github.io/points.js/widget#",e=new URLSearchParams;e.set("l",u.config.list),e.set("c",u.channel.login),e.set("v",u.config.volume.toString()),e.set("r",u.config.reward.random),u.config.reward.useBoth&&e.set("e",u.config.reward.choose),e.set("R",u.config.show.rewards?"1":"0"),e.set("S",u.config.show.sounds?u.config.show.inlineSound?"2":"1":"0"),u.config.random||e.set("fixed","");const S=b+e.toString();return e.set("t",u.token),[S,b+e.toString()]}),f=B(!1);function q(){e4(D.value[1])&&l.success({text:"\u0421\u0441\u044B\u043B\u043A\u0430 \u0441\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u0430!",duration:1500})}async function G(){const b=u.channel.login;await u.reset(),l.success({text:`\u0412\u044B \u0432\u044B\u0448\u043B\u0438 \u0438\u0437 \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0430 @${b}!`,duration:1500})}return(b,e)=>{const S=p("it-avatar"),V=p("it-button"),J=p("it-tooltip"),C=p("it-input"),k=p("it-checkbox"),H=p("it-icon"),W=p("it-slider"),K=p("it-divider"),X=p("it-modal");return _(),y(T,null,[r("div",_4,[r("div",v4,[i(S,{src:o(u).channel.profile_image_url,text:o(c),size:"60px"},null,8,["src","text"]),r("div",h4,"\u041F\u0440\u0438\u0432\u0435\u0442, "+R(o(c))+"!",1),i(J,{content:"\u0412\u044B\u0439\u0442\u0438 \u0438\u0437 \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0430"},{default:E(()=>[i(V,{text:"",icon:"logout",onClick:G})]),_:1})]),i(C,{"label-top":"API \u0422\u043E\u043A\u0435\u043D",placeholder:"Twitch API \u0422\u043E\u043A\u0435\u043D","prefix-icon":"vpn_key",type:"password",modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value=s),modelModifiers:{trim:!0},status:d.token.value?null:"danger",message:d.token.value?null:"\u0422\u043E\u043A\u0435\u043D \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C!"},null,8,["modelValue","status","message"]),i(C,{"label-top":"\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0432\u0443\u043A\u043E\u0432","prefix-icon":"summarize",placeholder:"https://gist.githubusercontent.com/aneyo/4566b18ed624ac7c2b28daaedc28c7dd/raw/points.txt",modelValue:o(u).config.list,"onUpdate:modelValue":e[1]||(e[1]=s=>o(u).config.list=s),modelModifiers:{trim:!0},status:d.list.value?null:"danger",message:d.list.value?null:"\u041D\u0443\u0436\u043D\u043E \u0443\u043A\u0430\u0437\u0430\u0442\u044C \u0441\u0441\u044B\u043B\u043A\u0443 \u043D\u0430 \u043B\u0438\u0441\u0442!"},null,8,["modelValue","status","message"]),i(k,{type:"primary",label:"\u041F\u0435\u0440\u0435\u043C\u0435\u0448\u0438\u0432\u0430\u0442\u044C \u043F\u043E\u0440\u044F\u0434\u043E\u043A \u0437\u0432\u0443\u043A\u043E\u0432","sub-label":"\u041F\u0440\u0438 \u043A\u0430\u0436\u0434\u043E\u043C \u043F\u0435\u0440\u0435\u0437\u0430\u043F\u0443\u0441\u043A\u0435 \u043F\u043E\u0440\u044F\u0434\u043E\u043A \u0437\u0432\u0443\u043A\u043E\u0432 \u0431\u0443\u0434\u0435\u0442 \u043F\u0435\u0440\u0435\u043C\u0435\u0448\u0438\u0432\u0430\u0442\u0441\u044F, \u043F\u043E\u043B\u0435\u0437\u043D\u043E \u0434\u043B\u044F \u043D\u0430\u0433\u0440\u0430\u0434\u044B \u0432\u044B\u0431\u043E\u0440\u043E\u0447\u043D\u044B\u0445 \u0437\u0432\u0443\u043A\u043E\u0432",modelValue:o(u).config.random,"onUpdate:modelValue":e[2]||(e[2]=s=>o(u).config.random=s)},null,8,["modelValue"]),i(C,{"label-top":"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043D\u0430\u0433\u0440\u0430\u0434\u044B","prefix-icon":"star_rate",placeholder:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043D\u0430\u0433\u0440\u0430\u0434\u044B, \u043A\u043E\u0442\u043E\u0440\u0430\u044F \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C\u0441\u044F \u0434\u043B\u044F \u0432\u043E\u0441\u043F\u0440\u043E\u0438\u0437\u0432\u0438\u0434\u0435\u043D\u0438\u044F \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u044B\u0445 \u0437\u0432\u0443\u043A\u043E\u0432",modelValue:o(u).config.reward.random,"onUpdate:modelValue":e[3]||(e[3]=s=>o(u).config.reward.random=s),modelModifiers:{trim:!0},status:w.rewardRandom.value?"danger":null,message:w.rewardRandom.value},null,8,["modelValue","status","message"]),o(u).config.reward.useBoth?(_(),N(C,{key:0,"label-top":"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043D\u0430\u0433\u0440\u0430\u0434\u044B \u0434\u043B\u044F \u0432\u044B\u0431\u043E\u0440\u043E\u0447\u043D\u043E\u0433\u043E \u0437\u0432\u0443\u043A\u0430","prefix-icon":"star_half",placeholder:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043D\u0430\u0433\u0440\u0430\u0434\u044B, \u043A\u043E\u0442\u043E\u0440\u0430\u044F \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C\u0441\u044F \u0434\u043B\u044F \u0432\u043E\u0441\u043F\u0440\u043E\u0438\u0437\u0432\u0438\u0434\u0435\u043D\u0438\u044F \u0432\u044B\u0431\u043E\u0440\u043E\u0447\u043D\u044B\u0445 \u0437\u0432\u0443\u043A\u043E\u0432",modelValue:o(u).config.reward.choose,"onUpdate:modelValue":e[4]||(e[4]=s=>o(u).config.reward.choose=s),modelModifiers:{trim:!0},status:w.rewardSelect.value?"danger":null,message:w.rewardSelect.value},null,8,["modelValue","status","message"])):A("",!0),i(k,{type:"primary",label:"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u043D\u0430\u0433\u0440\u0430\u0434\u0443 \u0434\u043B\u044F \u0432\u044B\u0431\u043E\u0440\u043E\u0447\u043D\u044B\u0445 \u0437\u0432\u0443\u043A\u043E\u0432",modelValue:o(u).config.reward.useBoth,"onUpdate:modelValue":e[5]||(e[5]=s=>o(u).config.reward.useBoth=s)},null,8,["modelValue"]),r("span",E4,[i(H,{name:o(h)},null,8,["name"]),w4]),i(W,{modelValue:n.value,"onUpdate:modelValue":e[6]||(e[6]=s=>n.value=s),numbers:"",min:0,step:1,stepPoints:!0,max:100},null,8,["modelValue"]),i(K),i(k,{type:"primary",label:"\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u0430\u043A\u0442\u0438\u0432\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0435 \u043D\u0430\u0433\u0440\u0430\u0434\u044B","sub-label":"\u0412 \u043F\u0440\u0430\u0432\u043E\u043C \u043D\u0438\u0436\u043D\u0435\u043C \u0443\u0433\u043B\u0443 \u0432\u0438\u0434\u0436\u0435\u0442\u0430 \u0431\u0443\u0434\u0443\u0442 \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C\u0441\u044F \u0432\u0441\u0435 \u0430\u043A\u0442\u0438\u0432\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0435 \u043D\u0430\u0433\u0440\u0430\u0434\u044B, \u0437\u0430 \u0438\u0441\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0435\u043C \u043D\u0430\u0433\u0440\u0430\u0434 \u0437\u0432\u0443\u043A\u043E\u0432",modelValue:o(u).config.show.rewards,"onUpdate:modelValue":e[7]||(e[7]=s=>o(u).config.show.rewards=s)},null,8,["modelValue"]),i(k,{type:"primary",label:"\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u0430\u043A\u0442\u0438\u0432\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0435 \u0437\u0432\u0443\u043A\u0438","sub-label":"\u0412 \u043F\u0440\u0430\u0432\u043E\u043C \u043D\u0438\u0436\u043D\u0435\u043C \u0443\u0433\u043B\u0443 \u0432\u0438\u0434\u0436\u0435\u0442\u0430 \u0431\u0443\u0434\u0443\u0442 \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C\u0441\u044F \u0432\u0441\u0435 \u0430\u043A\u0442\u0438\u0432\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0435 \u0437\u0432\u0443\u043A\u0438",modelValue:o(u).config.show.sounds,"onUpdate:modelValue":e[8]||(e[8]=s=>o(u).config.show.sounds=s)},null,8,["modelValue"]),i(k,{type:"primary",label:"\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u0437\u0432\u0443\u043A\u0438 \u0432 \u043E\u0434\u043D\u0443 \u043B\u0438\u043D\u0438\u044E","sub-label":"\u0422\u043E\u043B\u044C\u043A\u043E \u043E\u0434\u0438\u043D \u0437\u0432\u0443\u043A \u0437\u0430 \u0440\u0430\u0437 \u0431\u0443\u0434\u0435\u0442 \u043F\u043E\u043A\u0430\u0437\u0430\u043D",disabled:!o(u).config.show.sounds,modelValue:o(u).config.show.inlineSound,"onUpdate:modelValue":e[9]||(e[9]=s=>o(u).config.show.inlineSound=s)},null,8,["disabled","modelValue"])]),o(m)&&!f.value?(_(),y("div",D4,[r("div",B4,[i(V,{icon:"reply",block:"",onClick:e[10]||(e[10]=s=>f.value=!0)},{default:E(()=>[y4]),_:1})])])):A("",!0),i(X,{modelValue:f.value,"onUpdate:modelValue":e[13]||(e[13]=s=>f.value=s)},{image:E(()=>[A4]),body:E(()=>[r("div",b4,[i(C,{"prefix-icon":"link",modelValue:o(D)[0],"onUpdate:modelValue":e[11]||(e[11]=s=>o(D)[0]=s),disabled:""},null,8,["modelValue"]),r("div",C4,[i(V,{pulse:"",block:"",type:"primary",icon:"content_copy",onClick:q},{default:E(()=>[k4]),_:1}),i(V,{onClick:e[12]||(e[12]=s=>f.value=!1)},{default:E(()=>[F4]),_:1})])])]),_:1},8,["modelValue"])],64)}}});var x4=L(V4,[["__scopeId","data-v-7414429e"]]);const S4={key:0,class:"loading"},I4=I({setup(a){const l=U(),u=B(!0);return P(async()=>{if(u.value=!0,await l.load(),!l.token)return u.value=!1;try{await l.fetchUser()}catch{await l.reset(!1)}u.value=!1}),(c,t)=>{const n=p("it-loading");return _(),y(T,null,[u.value?(_(),y("div",S4,[i(n)])):A("",!0),!u.value&&!o(l).token?(_(),N(g4,{key:1})):A("",!0),!u.value&&o(l).token&&o(l).channel?(_(),N(x4,{key:2})):A("",!0)],64)}}});var $4=L(I4,[["__scopeId","data-v-6d9a70f6"]]);const O=t4($4).use(o4()).use(n4);O.provide("$message",O.config.globalProperties.$Message);O.mount("#app");
